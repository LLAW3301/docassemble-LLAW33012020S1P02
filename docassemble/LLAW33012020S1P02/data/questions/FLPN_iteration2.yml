---
objects:
  - TDBselected_services: DAList.using(there_are_any=True, auto_gather=False)
---
code: |
  TDBselected_services.clear()
  for TDBa_service in FLPN_services:
    if TDBa_service['append']:
      TDBselected_services.append(TDBa_service)
  TDBselected_services.gathered = True
---
code: |
  if ( FLPN_services[i]['location_requirement'] and FLPN_services[i]['service_requirement'] ):
    FLPN_services[i]['append'] = True
  else:
    FLPN_services[i]['append'] = False
---
code: |
  FLPN_services[i]['location_requirement'] = False
  for TDBa_location in TDBlocation:
    if TDBa_location in FLPN_services[i]['location']:
      FLPN_services[i]['location_requirement'] = True
---
code: |
  FLPN_services[i]['service_requirement'] = False
  for TDB2a_service in TDBservices:
    if TDB2a_service in FLPN_services[i]['caters_for']:
      FLPN_services[i]['service_requirement'] = True
---